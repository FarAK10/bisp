<button class="w-40 mb-4" nzType="primary" nz-button (click)="back()">
  Back
</button>
<form
  [formGroup]="createUserForm"
  nz-form
  class="space-y-4 bg-white p-5 rounded shadow-sm w-full max-w-md"
>
  <!-- Email Field -->
  <div class="flex flex-col">
    <label for="email" class="mb-1 font-medium">Email</label>
    <input
      nz-input
      type="email"
      id="email"
      formControlName="email"
      placeholder="Enter email"
      class="rounded border-gray-300"
    />
    @if ( createUserForm.get('email')?.invalid &&
    (createUserForm.get('email')?.touched || createUserForm.get('email')?.dirty)
    ) {
    <div class="text-red-500 text-sm mt-1">Please enter a valid email.</div>
    }
  </div>

  <!-- Password Field -->
  @if(!isEditMode()){
  <div class="flex flex-col">
    <label for="password" class="mb-1 font-medium">Password</label>
    <input
      nz-input
      type="password"
      id="password"
      formControlName="password"
      placeholder="Enter password"
      class="rounded border-gray-300"
    />
    @if ( createUserForm.get('password')?.invalid &&
    (createUserForm.get('password')?.touched ||
    createUserForm.get('password')?.dirty) ) {
    <div class="text-red-500 text-sm mt-1">Password is required.</div>
    }
  </div>
  }

  <!-- FirstName Field -->
  <div class="flex flex-col">
    <label for="name" class="mb-1 font-medium">FirstName</label>
    <input
      nz-input
      type="text"
      id="name"
      formControlName="firstName"
      placeholder="Enter name"
      class="rounded border-gray-300"
    />
    @if ( createUserForm.get('name')?.invalid &&
    (createUserForm.get('name')?.touched || createUserForm.get('name')?.dirty) )
    {
    <div class="text-red-500 text-sm mt-1">FirstName is required.</div>
    }
  </div>

  <div class="flex flex-col">
    <label for="lastName" class="mb-1 font-medium">Lastname</label>
    <input
      nz-input
      type="text"
      id="lastName"
      formControlName="lastName"
      placeholder="Enter name"
      class="rounded border-gray-300"
    />
    @if ( createUserForm.get('name')?.invalid &&
    (createUserForm.get('name')?.touched || createUserForm.get('name')?.dirty) )
    {
    <div class="text-red-500 text-sm mt-1">Lastname is required.</div>
    }
  </div>

  <!-- Roles Field -->
  <div class="flex flex-col">
    <label for="roles" class="mb-1 font-medium">Roles</label>
    <nz-select
      id="roles"
      formControlName="roles"
      nzMode="multiple"
      nzPlaceHolder="Select roles"
      class="w-full"
    >
      @for (role of roles;track role) {
      <nz-option [nzValue]="role.value" [nzLabel]="role.label"></nz-option>
      }
    </nz-select>
    @if ( createUserForm.get('roles')?.invalid &&
    (createUserForm.get('roles')?.touched || createUserForm.get('roles')?.dirty)
    ) {
    <div class="text-red-500 text-sm mt-1">
      Please select at least one role.
    </div>
    }
  </div>

  <button
    nz-button
    nzType="primary"
    (click)="onSubmit()"
    type="submit"
    [disabled]="createUserForm.invalid"
    class="mt-2 w-full"
  >
    {{ label() }}
  </button>
</form>
